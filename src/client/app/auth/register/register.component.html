<div *ngIf="!appState.get('isAuthenticated')">
  <h1 class="section-header">Register</h1>
  <md-card>
    <md-card-content>
      <form *ngIf="!accepted" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <div>
          <md-input-container>
            <input mdInput type="text" formControlName="firstName"
                   placeholder="First Name" (blur)="onBlur()">
            <md-hint class="form-error" *ngIf="formErrors.firstName">
              {{ formErrors.firstName }}
            </md-hint>
          </md-input-container>
        </div>
        <div>
          <md-input-container>
            <input mdInput type="text" formControlName="lastName"
                   placeholder="Last Name" (blur)="onBlur()">
          </md-input-container>
        </div>
        <div>
          <md-input-container>
            <input mdInput type="text" formControlName="username"
                   placeholder="Username" (blur)="onBlur()">
            <md-hint class="form-error" *ngIf="formErrors.username">
              {{ formErrors.username }}
            </md-hint>
          </md-input-container>
        </div>

        <div>
          <md-input-container>
            <input mdInput type="email" formControlName="email"
                   placeholder="Email" (blur)="onBlur()">
            <md-hint class="form-error" *ngIf="formErrors.email">
              {{ formErrors.email }}
            </md-hint>
          </md-input-container>
        </div>

        <div>
          <md-input-container>
            <input mdInput type="password" name="password" formControlName="password"
                   placeholder="Password" (blur)="onBlur()">
            <md-hint class="form-error" *ngIf="formErrors.password">
              {{ formErrors.password }}
            </md-hint>
          </md-input-container>
        </div>

        <div>
          <md-input-container>
            <input mdInput type="password" name="confirm" formControlName="confirm"
                   placeholder="Confirm Password" (blur)="onBlur()">
            <md-hint class="form-error" *ngIf="formErrors.confirm">
              {{ formErrors.confirm }}
            </md-hint>
          </md-input-container>
        </div>
        <div>
          <button md-button color="warn" (click)="resetForm()">
            Clear
          </button>
          <button md-raised-button color="primary" type="submit">
            Submit
          </button>
        </div>
      </form>
      <div *ngIf="form.pending || active">
        <md-progress-bar
          style="margin: 16px 8px; width: 25%"
          color="primary"
          [mode]="active ? 'indeterminate':'query'">
        </md-progress-bar>
      </div>
      <div *ngIf="submitted">
        <p [hidden]="!active">
          {{message}}
        </p>
        <p [hidden]="active" [ngClass]="accepted ? 'form-valid': 'form-error'">
          {{message}}
        </p>
      </div>
    </md-card-content>
  </md-card>
</div>
<div *ngIf="appState.get('isAuthenticated')">
  <h1 class="section-header">Hello, user</h1>
  <p>
    You are currently logged in. To create a new account please log out first.
  </p>
  <div>
    <button md-raised-button color="primary" (click)="logout()">Log Out</button>
  </div>
</div>
<div *ngIf="!appState.get('isAuthenticated')">
  <div>
    <div>form details:</div>
    <pre>Is form valid?: <br>{{form.valid | json}}</pre>
    <pre>Is form submitted?: <br>{{submitted | json}}</pre>
    <pre>form value: <br>{{form.value | json}}</pre>
  </div>
  <div>
    Form changes:
  </div>
  <div *ngFor="let event of events">
    <pre> {{ event | json }} </pre>
  </div>
</div>
